---
- name: set hostname
  hostname:
    name: "{{ inventory_hostname }}"

- name: populates hosts files with all hosts
  template: src=hosts.j2 dest=/etc/hosts

- name: Disallow password authentication
  lineinfile: 
    dest=/etc/ssh/sshd_config
    regexp="^PasswordAuthentication"
    line="PasswordAuthentication no"
    state=present
  notify: restart ssh

- name: Disallow root SSH access
  lineinfile: 
    dest=/etc/ssh/sshd_config
    regexp="^PermitRootLogin"
    line="PermitRootLogin no"
    state=present
  notify: restart ssh

